# 嗓音分析（快速&完整）使用指南

本指南介绍两种分析方式：
- 快速基频测试（QuickF0Test）：几步得到平均基频并可一键保存为事件
- 全流程嗓音测试向导（VoiceTestWizard）：多步骤录音 + 问卷 + 后端分析，生成完整报告

入口（建议从 /mypage 点击按钮进入）：
- 快速基频测试：/quick-f0-test
- 完整嗓音测试：/voice-test


一、快速基频测试（/quick-f0-test）
用途：快速获得当前基频（F0），并可保存为“自我测试（self_test）”事件。

操作步骤：
1) 点击“开始测试”，浏览器会请求麦克风权限
2) 实时反馈区会显示“当前基频（Hz）”与对应音名，曲线区实时绘制 F0 变化
3) 完成后点击“停止测试”，页面会计算“平均基频”
4) 如需留存，点击“保存结果”
   - 系统会创建一条 self_test 事件，details 包含：fundamentalFrequency=平均F0、appUsed="VFS Tracker Fast F0 Analysis Tool"，并在备注中写入数值
   - 保存成功后返回 /mypage

提示与边界：
- 仅作为快速参考，阈值较严格（需要足够清晰的有声段，清浊音与无声段会被过滤）
- 建议安静环境、靠近麦克风、避免大幅爆破音
- 若权限授予失败或无声段，平均值可能为 0；可重试


二、完整嗓音测试向导（/voice-test）
用途：按照向导录音与作答问卷，云端分析后生成报告（PDF 附件可在后续详情中下载）。流程约 10 分钟，请勿中断或刷新。

步骤总览（以屏幕标题为准）：
0) 说明与同意
- 阅读测试说明与注意事项；点击“下一步”代表同意

1) 设备与环境校准（录两段）
- 先录 5 秒静音
- 然后朗读“他去无锡市，我到黑龙江”两遍

2) 最长发声时（MPT）+ 稳定元音（录两段）
- 舒适音量，尽可能长地发 /a/（两次，系统择优）

3) 音域测定：滑音（共四段）
- 从最低滑到最高（上滑音）两次；从最高滑到最低（下滑音）两次
- 要求连贯不跳音，衡量可覆盖的极限范围

4) 定点音 + 共振峰（两段）
- 用你能稳定控制的最低/最高音分别发 /a/，各 3-4 秒

5) 朗读指定语句（一段）
- 按屏幕文字完成朗读

6) 自由说话（一段）
- 围绕“介绍你最喜欢的食物”自由表达 30-60 秒

7) 主观量表
- 依次完成 RBH、OVHS-9、TVQ-G 三个问卷（每题必答）

8) 结果确认与报告生成
- 点击“生成报告”后，后端开始分析并轮询结果；完成后显示详细指标与报告下载/查看入口
- 如失败，可重试分析或“重新开始测试”（会新建会话）

使用建议：
- 录音阶段：每段完成后务必点击“停止录音且继续”，以触发自动上传；说错可点“停止录音且放弃”重来
- 上传失败会给出“重试上传”按钮；分析失败可“重试分析”
- 不要刷新或关闭页面，否则会话中断（已上传的部分仍保留在云端）

报告与后续：
- 分析完成后在结果页可查看，可再次“重新生成报告”
- 生成的 PDF 报告会以附件形式保存，你可在后续的事件详情/时间轴中下载（文件名通常为 voice_test_report.pdf）
- 结果与附件仅供参考，不构成医疗诊断

隐私与资源：
- 录音文件与报告存储在受保护的云端存储（S3），计算在无服务后端（Lambda）执行
- 过程消耗计算与存储资源，请在一个会话中尽量一次性完成

