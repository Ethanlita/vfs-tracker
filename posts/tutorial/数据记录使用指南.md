# 数据记录使用指南

本指南介绍如何添加和管理个人嗓音相关事件，帮助你完整记录测量、训练、练习、手术与感受等数据。

入口与路径：
- 添加事件：/add-event（需登录，也可从 /mypage 点击“添加新事件”）
- 事件管理：/event-manager（需登录，详细筛选/搜索/删除见“数据查询”指南）


一、添加新事件（/add-event）
- 页面由“事件表单（EventForm）”提供，表单会根据事件类型显示不同字段。
- 基本信息：
  - 事件类型（必填）：从“自我测试、医院检测、嗓音训练、自我练习、嗓音手术、感受记录”中选择。
  - 事件日期（必填）：默认今天，可改为历史日期。
- 附件：
  - 支持多文件（PDF、图片、Word 等）。
  - 上传后会显示列表，可点击预览与“移除”。
  - 建议为“医院检测”“手术”等上传报告或证明材料；系统会在后台解析（如 Gemini 自动审核医院报告内容），但不涉及人工查看。
- 提交：
  - 点击“✨ 添加新事件”，成功后将自动返回我的仪表板 /mypage（或 2 秒后返回）。
  - 失败时会显示错误，可点击“重试”。


二、事件类型与字段说明
1) 自我测试（self_test）
- 常用字段：
  - 使用的 App（appUsed）
  - 声音状态（sound，多选，含“其他”时需补充说明）
  - 发声方式（voicing，多选，含“其他”时需补充说明）
  - 基频（fundamentalFrequency, Hz）
  - Jitter（%）、Shimmer（%）、谐噪比 HNR（dB）
  - 共振峰（f1/f2/f3, Hz）→ 会被整理到 details.formants
  - 音域范围最高/最低（pitchMax/pitchMin, Hz）→ 会被整理到 details.pitch
  - 备注（notes）
- 适合场景：使用 App 或网页工具测得参数后快速记录。

2) 医院检测（hospital_test）
- 重点：强烈建议上传医院报告附件，便于后续自动核对。
- 常用字段与“自我测试”基本一致，另有：
  - 医院/诊所名称（location，必填）、设备（equipmentUsed）
- 适合场景：门诊检查、声学室测量等。

3) 嗓音训练（voice_training）
- 字段示例：
  - 训练内容（trainingContent，必填）
  - 自我练习内容（selfPracticeContent）
  - 嗓音状态评估（voiceStatus，必填）
  - 参考资料（references）
  - 发声方式（voicing，必填）
  - 感受和反思（feelings）
  - 指导者姓名（instructor）
- 适合场景：接受老师或治疗师指导的课程记录。

4) 自我练习（self_practice）
- 字段示例：
  - 练习内容（practiceContent，必填）
  - 是否有指导（hasInstructor，必填）；若为“是”，可填写指导者姓名
  - 参考资料（references）
  - 嗓音状态评估（voiceStatus，必填）
  - 发声方式（voicing，必填）
  - 感受和反思（feelings）
- 适合场景：日常练习打卡与反思。

5) 嗓音手术（surgery）
- 字段示例：
  - 手术医生（doctor，必选，支持“自定义”并填写 customDoctor）
  - 手术地点（location，必选，支持“自定义”并填写 customLocation）
  - 手术备注（notes）
- 适合场景：VFS 等相关手术记录。

6) 感受记录（feeling_log）
- 字段：
  - 感受记录（content，必填）
- 适合场景：主观体验、恢复日记与状态波动。


三、填写与上传建议
- 尽量补充基频（Hz）、音域范围、共振峰等关键参数，有助于后续图表分析。
- 报告/影像建议合并为 PDF 或清晰照片，多页可多次上传。
- 涉隐私信息可自行打码，不影响系统解析与数据统计。


四、查看与后续管理
- 成功提交后：
  - /mypage 的“声音频率分析”与“事件时间轴”会逐步反映新增数据（含附件链接）。
  - /event-manager 可进行筛选、搜索、查看详情与删除。
- 附件访问：
  - 系统会将附件存储到安全位置，页面会动态解析可访问链接；如链接过期，可在事件详情再次获取。


五、常见问题
- 看不到事件？检查登录状态，或稍后刷新；开发环境下可能使用的是 mock 用户数据。
- 附件无法预览？尝试重新打开事件详情；必要时重新上传更清晰的版本。
- 字段太多？仅需填写与你事件类型相关的关键项，其他项可留空。
